<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Convert image to base64 data</title>
<style>
body{
margin:0;
}
*{
box-sizing:border-box;
}
textarea{
display:block;
width:100%;
max-width:800px;
font-size:16px;
font-family:Arial,sans-serif;
margin:10px 0;
height:50vh;
resize:none;
padding:3px;
}
img{
cursor:pointer;
margin-top:10px;
}
main{
margin:10px;
}
</style>
</head>
<body>

  <main>
<input type="file" onchange="previewFile()"><br>
<img src="" height="200" alt="Image preview..." style="border:1px solid #000;display:none;">
</main>

<script>

function previewFile() {
const preview = document.querySelector('img');
const codeElem = document.createElement('textarea');
document.querySelector('main').appendChild(codeElem);
const file = document.querySelector('input[type=file]').files[0];
const reader = new FileReader();

reader.addEventListener("load", function () {
preview.style.display='inline';
// convert image file to base64 string
const base64data = reader.result;
preview.src = base64data;

preview.addEventListener('click',function(){
// window.open(this.src);
const newWindow = window.open("");
newWindow.document.write('<img src="'+this.src+'">');
})

codeElem.value = base64data;
console.log(base64data)
}, false);

if (file) {
reader.readAsDataURL(file);
}
}

</script>
</body>
</html>
