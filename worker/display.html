<!DOCTYPE html>
<html>
<body>

<img id="uploadedImage" alt="image" src="data:image/gif;base64,R0lGODlhAQABAID/AP///wAAACwAAAAAAQABAAACAkQBADs=" />

<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.ready
      .then(function(reg) {
        console.log('Service Worker Ready!', reg);
        console.log('Current page is controlled by: ', navigator.serviceWorker.controller);
        navigator.serviceWorker.addEventListener('message', function(event){
          console.log('Received a message from service worker: ', event.data);
          document.getElementById('uploadedImage').src = event.data;

          navigator.serviceWorker.controller.postMessage('confirmation');

        });
      })
      .catch(function(err) {
        console.log('Service Worker registration failed: ', err);
      });
  } else {
    console.log('Service Worker is not supported by the browser.');
  }

</script>  

</body>
</html>
